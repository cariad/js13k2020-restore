<html><head><meta name=viewport content="width=device-width,initial-scale=1"><title>RESTORE</title><meta charset=UTF-8><style>body{margin:0}</style></head><body><canvas id=c width=800 height=600></canvas><script>var e,t,r,a=Math.floor,i=document.getElementById("c"),o=i.getContext("2d"),l=(e,t)=>e.forEach(t),n=[],f={p:[],o:[]},h=()=>{for(var t=i.width=window.innerWidth,r=i.height=window.innerHeight,a=(p=Math.min((t-.1*t*2)/(u=4),(r-.02*r*2)/(d=2)))-2*(g=.02*p),o=t/2-p*u/2,l=r/2-p*d/2,n=[],h=[],s=0;s<d;s++)h.push(l+g+s*(p+g));for(var v=0;v<u;v++)n.push(o+g+v*(p+g));f={w:window.innerWidth,h:window.innerHeight,p:c(!0,n[1],h[0],a),o:c(!1,n[2],h[0],a),a:{}};var u,d,p,g=.02*(p=Math.min((t-.02*t*2)/(u=4),(r-.02*r*2)/(d=2)));f.cpd=a,f.pa={},f.pa.x=n[0],f.pa.y=h[0],f.oa={},f.oa.x=n[3],f.oa.y=h[0],f.buttons=[],e&&f.buttons.push({x:n[3],y:h[1],w:f.cpd,h:40,t:"Accept!"})},c=(e,a,i,o)=>{var l=i;return(e?t.f:r.f).map(t=>{var r=s(e,t,a,l,o);return l+=2*r.h,r})},s=(t,r,a,i,o)=>{var l={l:{t:r.i,x:a,y:i}};i+=20;var n=e&&t?e.o.find(e=>e.i==r.i):null,f=e&&t?e.p.find(e=>e.i==r.i):null,h=o/89,c=10*h,s=1*h,v=c+2*c/9;l.x=a,l.y=i,l.w=o,l.h=v,l.c=[],l.cw=c;for(var u=0;u<8;u++){l.c[u]={};var d=Math.pow(2,8-u-1);l.c[u].g=(r.b&d)==d,l.c[u].x=a+h+u*(c+s),l.c[u].y=i+s,l.c[u].to=n&&(n.b&d)==d,l.c[u].ti=f&&(f.b&d)==d,l.c[u].h=0}return l},v=(e,a)=>{for(var i=e?t.f:r.f,o=e?f.p:f.o,l=0;l<i.length;l++)u(o[l],a)},u=(e,t)=>{o.fillStyle="black",o.font="bold 16px monospace",o.textAlign="left",o.fillText(e.l.t,e.l.x,e.l.y);var r=new Date,a=t/89*8;o.fillStyle="black",o.fillRect(e.x,e.y,e.w,e.h);for(var i=r.getMilliseconds(),l=i>500?0:(500-i%500)/500,n=0;n<8;n++){var f=e.c[n].h?["#ff0","#660"]:["#0f0","#666"];o.fillStyle=e.c[n].g?f[0]:f[1],o.fillRect(e.c[n].x,e.c[n].y,e.cw,e.cw);var h=e.c[n].x+(e.cw-a)/2,c=.4*e.cw,s=a/4;if(e.c[n].to){var v=e.c[n].y+e.cw/6-.75*c+c*l;o.beginPath(),o.moveTo(h,v),o.lineTo(h+a,v),o.lineTo(h+a/2,v-.4*a),o.closePath(),o.fillStyle="#f00",o.fill(),o.fillRect(h+s,v,a-2*s,a/2)}e.c[n].ti&&(v=e.c[n].y+e.cw/6-.75*c+c*(1-l),o.beginPath(),o.moveTo(h,v),o.lineTo(h+a,v),o.lineTo(h+a/2,v+.4*a),o.closePath(),o.fillStyle="#00f",o.fill(),o.fillRect(h+s,v-a/2,a-2*s,a/2))}},d=()=>{i.width=f.w,i.height=f.h;var e=window.innerWidth,a=window.innerHeight,l=Math.min((e-.02*e*2)/4,(a-.02*a*2)/2),n=.02*l,h=e/2-4*l/2,c=a/2-2*l/2;o.fillStyle="lightgray",o.fillRect(0,0,e,a),o.fillStyle="black",o.font="bold 22px cursive",o.textAlign="left",o.textBaseline="top",o.fillText(`${e} x ${a}`,0,0);for(var s=[],u=[],p=0;p<2;p++)u.push(c+n+p*(l+n));for(var g=0;g<4;g++)s.push(h+n+g*(l+n));t&&(x(t,f.pa.x,f.pa.y,f.cpd,!0),v(!0,f.cpd)),r&&(x(r,f.oa.x,f.oa.y,f.cpd,!1),v(!1,f.cpd)),o.font="bold 22px cursive",o.textAlign="center",o.textBaseline="middle",o.fillStyle="#000",f.buttons.forEach(e=>{o.fillText(e.t,e.x+f.cpd/2,e.y+e.h/2,e.w,e.h),o.strokeRect(e.x,e.y,f.cpd,e.h)}),setTimeout(()=>requestAnimationFrame(d),1e3/60)},p=(e,t,r,a,i,l,n,f,h)=>{var c=document.createElement("canvas"),s=c.getContext("2d");c.width=t,c.height=r,s.lineWidth=1,e(s);for(var v=s.getImageData(0,0,t,r),u=[],d=0;d<r;d++)for(var p=0;p<t;p++){var g,w=d*(4*t)+4*(h?t-p-1:p);v.data[w+3]<128?(u.push(0),u.push(0),u.push(0),u.push(0)):(g=v.data[w+0]>=128?n:n.map(v.data[w+1]>=128?e=>e+f:e=>e-f),u.push(g[0]),u.push(g[1]),u.push(g[2]),u.push(255))}for(var b=0;b<u.length;b++)v.data[b]=u[b];s.clearRect(0,0,t,r),s.putImageData(v,0,0);var y=m(t,r,l);return o.imageSmoothingEnabled=!1,o.drawImage(c,a,i,l,y),o.imageSmoothingEnabled=!0,y},m=(e,t,r)=>r/e*t,w="#f00",b="#0f0",y="#00f",x=(e,t,r,a,i)=>{var o=(e,t)=>{e.strokeStyle=w,e.fillStyle=b,l(t,t=>{e.beginPath(),e.moveTo(t[0],t[1]),e.bezierCurveTo(t[2],t[3],t[4],t[5],t[6],t[7]),e.fill(),e.stroke()})},n=e.a;p(e=>o(e,n.hs[0]),31,31,t,r,a,n.ht,64,i),p(e=>{e.strokeStyle=w,e.fillStyle=b,S(e,5,5,20,20,n.hr)},31,31,t,r,a,n.s,40,i),p(e=>{e.fillStyle=w,e.fillRect(7,n.ey,4,n.eh),e.fillRect(11+n.eg,n.ey,4,n.eh),e.fillStyle=y,e.fillRect(8,n.ey+1,1,1),e.fillRect(11+n.eg+1,n.ey+1,1,1)},31,31,t,r,a,[255,255,255],255,i),p(e=>{e.fillStyle=y;var t=n.m[0]/3+n.m[2],r=19+n.m[1],a=n.m[0]/3*2+n.m[2],i=19+n.m[1],o=n.m[2]+n.m[0];e.beginPath(),e.moveTo(n.m[2],19),e.bezierCurveTo(t,r,a,i,o,19),e.stroke()},31,31,t,r,a,n.s,110,i),p(e=>o(e,n.hs[1]),31,31,t,r,a,n.ht,64,i)},S=(e,t,r,a,i,o)=>{e.beginPath(),e.moveTo(t+o,r),e.lineTo(t+a-o,r),e.quadraticCurveTo(t+a,r,t+a,r+o),e.lineTo(t+a,r+i-o),e.quadraticCurveTo(t+a,r+i,t+a-o,r+i),e.lineTo(t+o,r+i),e.quadraticCurveTo(t,r+i,t,r+i-o),e.lineTo(t,r+o),e.quadraticCurveTo(t,r,t+o,r),e.closePath(),e.fill(),e.stroke()},T=(new Date).getMinutes(),E=(new Date).getSeconds(),P=(e=10)=>{var t=(T+E)/100,r=a(100*(t-a(t)));return T=E,E=r,r%e},k=()=>[4,0].reduce((e,t)=>(e+=P(14)+1)<<t,0),R=e=>{console.info(e.n+" holds:"),l(e.f,e=>console.info(`> (file ID: ${(""+e.i).padStart(2,"0")}) ${A(e.b)}`))},A=e=>e.toString(2).padStart(8,0),C=()=>{t=D(!0,3,"Bob"),M()},M=()=>{var e;r=D(!0,3,((e=[])[0]=["Astro","Captain","Enchanter","Pirate","Priest","Sales Manager","g","h","i","j"][P()],e[1]=["Nigel","Fyodor","Jam","Jonas","Lucas","f","g","h","i","j"][P()],e[2]=["Keyboard","Planet","Soul","Video","e","f","g","h","i","j"][P()]+["jammer","crusher","juicer","b","e","f","g","h","i","j"][P()],e.join(" "))),z()},j=(e,t)=>{for(var r=[],a=[],i=0;i<e;i++)r.push(i);for(i=0;i<t;i++)a.push(r.splice(P(r.length),1)[0]);return a},D=(e,t,r)=>{var a={f:[],n:r,a:{s:[[197,140,133],[236,188,180],[80,51,53],[89,47,42]][P(4)].map(e=>e+1.5*(P()-4)),ht:[128*P(2),128*P(2),128*P(2)],hs:[[[],[]],[[[4,8,-6,34,20,34,8,1]],[[22,10,12,36,38,36,26,3],[26,3,-9,-6,-3,18,25,9]]],[[],[[22,6,6,-7,-7,17,21,8]]]][P(3)],hr:P(6)+3,ey:P(3)+12,eg:P(2)+2,eh:P(2)+2,m:[[10,2,8],[12,4,7]][P(2)]}};return e&&a.f.push({m:2,b:k(),i:0}),l(j(8,t),e=>a.f.push({m:1,b:k(),i:e+1})),a.f.filter(e=>0==e.b)==a.f.length?(console.error("All zeroes?!"),null):a},q=e=>{for(var t=0;e>0;)e&=e-1,t++;return t},I=(e,t)=>q(e)*t,L=(e,t)=>e.f.find(e=>e.i==t),$=(e,t)=>{(g=e.f.find(e=>e.i==t.i))?g.b+=t.b:e.f.push({m:1,b:t.b,i:t.i})},z=()=>{var i,o,n,f,h=(f={v:0},l((n=o=r,(i=t).f.map(e=>e.i).filter(e=>n.f.map(e=>e.i).includes(e))),e=>{var t=L(i,e),r=(L(o,e).b^t.b)&t.b,a=I(r,t.m);a>f.v&&(f.i=e,f.b=r,f.v=a)}),f.v>0?f:null);if(!h)return console.warn(`You have nothing of value to ${r.n}.`),void M();var c=((e,t,r)=>{var i=[];(i=e.f.map(r=>((e,t,r)=>{var a={i:r},i=L(e,r),o=L(t,r);return a.b=((o?o.b:0)^i.b)&i.b,a.v=I(a.b,i.m),a.e=i.m,a})(e,t,r.i)).filter(e=>e.b>0)).sort((e,t)=>e.v>t.v);var o=[],n=0;return l(i,e=>{if(e.v+n-r>0){var t=a((r-n)/e.e);if(!t)return;for(var i=j(8,8).map(e=>Math.pow(2,e));q(e.b)>t;){var l=i.pop();(e.b&l)==l&&(e.b-=l)}e.v=I(e.b,e.e)}o.push(e),n+=e.v}),o})(r,t,h.v);if(0==c.length)return console.warn(r.n+" has nothing of value to you."),void M();e={o:[h],p:c}};i.addEventListener("click",a=>{var i=a.offsetX,o=a.offsetY,f=n.reverse().find(e=>e.x<i&&i<e.x+e.w&&e.y<o&&o<e.y+e.h);f&&("Accept"==f.t?(a=>{l(e.o,e=>$(r,e)),l(e.p,e=>$(t,e)),e=null;var i=255==L(t,0).b,o=255==L(r,0).b;i&&o||i?(console.warn("You won! :)"),R(t)):o?(console.warn(r.n+" won! :("),R(r)):(console.info(r.n+" walks away with:"),R(r),M())})():"Again"==f.t?C():console.log(f.t))}),i.addEventListener("mousemove",e=>{e.preventDefault(),e.stopPropagation();var t,r=e.offsetX,a=e.offsetY;f.p.forEach(e=>{e.c.forEach(o=>{o.h=o.x<r&&r<o.x+e.cw&&o.y<a&&a<o.y+e.cw,o.h&&(t=1,i.style.cursor="pointer")})}),t||(i.style.cursor="default")}),window.addEventListener("resize",h,!0),window.addEventListener("orientationchange",h,!0),C(),h(),requestAnimationFrame(d);</script></body></html>