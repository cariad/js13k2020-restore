<html><head><meta name=viewport content="width=device-width,initial-scale=1"><title>RESTORE</title><meta charset=UTF-8><style>body{margin:0}</style></head><body><canvas id=c width=800 height=600></canvas><script>var e,t,l,i,r,a=Math.floor,o=document.getElementById("c"),n=o.getContext("2d"),c=(e,t)=>e.forEach(t),f={p:[],o:[]},h=()=>{for(var t=o.width=window.innerWidth,l=o.height=window.innerHeight,i=(b=Math.min((t-.04*t*2)/(p=4),(l-.04*l*2)/(d=2)))-2*(g=.02*b),r=t/2-b*p/2,a=l/2-b*d/2,n=[],c=[],h=0;h<d;h++)c.push(a+g+h*(b+g));for(var u=0;u<p;u++)n.push(r+g+u*(b+g));f={w:window.innerWidth,h:window.innerHeight,p:s(!0,n[1],c[0],i),o:s(!1,n[2],c[0],i),a:{}};var p,d,b,g=.02*(b=Math.min((t-.02*t*2)/(p=4),(l-.02*l*2)/(d=2)));f.cpd=i,f.pa={},f.pa.x=n[0],f.pa.y=c[0],f.oa={},f.oa.x=n[3],f.oa.y=c[0],f.b=[];var m=c[1];e&&(m=v("Accept",n[3],m),m=v("Counter",n[3],m))},v=(e,t,l)=>{var i=f.cpd/5;return f.b.push({x:t,y:l,w:f.cpd,h:i,t:e,s:0}),l+i+i/4},s=(e,t,l,a)=>{var o=l;return(e?i.f:r.f).map(l=>{var i=u(e,l,t,o,a);return o+=2*i.h,i})},u=(t,l,i,r,a)=>{var o,n,c={l:{t:l.i,x:i,y:r}};r+=20,t?(o=e?e.o.find(e=>e.i==l.i):null,n=e?e.p.find(e=>e.i==l.i):null):(o=e?e.p.find(e=>e.i==l.i):null,n=e?e.o.find(e=>e.i==l.i):null);var f=a/89,h=10*f,v=1*f,s=h+2*h/9;c.x=i,c.y=r,c.w=a,c.h=s,c.c=[],c.cw=h,c.i=l.i,c.p=t;for(var u=0;u<8;u++){var p=Math.pow(2,8-u-1);c.c[u]={b:p,g:(l.b&p)==p},c.c[u].x=i+f+u*(h+v),c.c[u].y=r+v,c.c[u].to=o&&(o.b&p)==p,c.c[u].ti=n&&(n.b&p)==p,c.c[u].h=0,c.c[u].p=c}return c},p=(e,t)=>{for(var l=e?i.f:r.f,a=e?f.p:f.o,o=0;o<l.length;o++)d(a[o],t)},d=(e,t)=>{n.fillStyle="black",n.font="bold 16px monospace",n.textAlign="left",n.fillText(e.l.t,e.l.x,e.l.y);var l=new Date,i=t/89*8;n.fillStyle="black",n.fillRect(e.x,e.y,e.w,e.h);for(var r=l.getMilliseconds(),a=r>500?0:(500-r%500)/500,o=0;o<8;o++){var c=e.c[o].h?["#ff0","#660"]:["#0f0","#666"];n.fillStyle=e.c[o].g?c[0]:c[1],n.fillRect(e.c[o].x,e.c[o].y,e.cw,e.cw);var f=e.c[o].x+(e.cw-i)/2,h=.4*e.cw,v=i/4;if(e.c[o].to){var s=e.c[o].y+e.cw/6-.75*h+h*a;n.beginPath(),n.moveTo(f,s),n.lineTo(f+i,s),n.lineTo(f+i/2,s-.4*i),n.closePath(),n.fillStyle="#f00",n.fill(),n.fillRect(f+v,s,i-2*v,i/2)}e.c[o].ti&&(s=e.c[o].y+e.cw/6-.75*h+h*(1-a),n.beginPath(),n.moveTo(f,s),n.lineTo(f+i,s),n.lineTo(f+i/2,s+.4*i),n.closePath(),n.fillStyle="#00f",n.fill(),n.fillRect(f+v,s-i/2,i-2*v,i/2))}},b=()=>{o.width=f.w,o.height=f.h,n.fillStyle="lightgray",n.fillRect(0,0,f.w,f.h),n.fillStyle="black",n.font="bold 22px cursive",n.textAlign="left",n.textBaseline="top",i&&(T(i,f.pa.x,f.pa.y,f.cpd,!0),p(!0,f.cpd)),r&&(T(r,f.oa.x,f.oa.y,f.cpd,!1),p(!1,f.cpd)),n.font="bold 22px cursive",n.textAlign="center",n.textBaseline="middle",n.fillStyle="#000",f.b.forEach(e=>{n.strokeStyle="black",n.strokeRect(e.x,e.y,f.cpd,e.h),n.fillStyle=e.s?"yellow":"grey",n.fillRect(e.x,e.y,f.cpd,e.h),n.fillStyle="black",n.fillText(e.t,e.x+f.cpd/2,e.y+e.h/2,e.w,e.h)}),requestAnimationFrame(b)},m=(e,t,l,i,r,a,o,c,f)=>{var h=document.createElement("canvas"),v=h.getContext("2d");h.width=t,h.height=l,v.lineWidth=1,e(v);for(var s=v.getImageData(0,0,t,l),u=[],p=0;p<l;p++)for(var d=0;d<t;d++){var b,g=p*(4*t)+4*(f?t-d-1:d);s.data[g+3]<128?(u.push(0),u.push(0),u.push(0),u.push(0)):(b=s.data[g+0]>=128?o:o.map(s.data[g+1]>=128?e=>e+c:e=>e-c),u.push(b[0]),u.push(b[1]),u.push(b[2]),u.push(255))}for(var m=0;m<u.length;m++)s.data[m]=u[m];v.clearRect(0,0,t,l),v.putImageData(s,0,0);var w=y(t,l,a);return n.imageSmoothingEnabled=!1,n.drawImage(h,i,r,a,w),n.imageSmoothingEnabled=!0,w},y=(e,t,l)=>l/e*t,w="#f00",x="#0f0",S="#00f",T=(e,t,l,i,r)=>{var a=(e,t)=>{e.strokeStyle=w,e.fillStyle=x,c(t,t=>{e.beginPath(),e.moveTo(t[0],t[1]),e.bezierCurveTo(t[2],t[3],t[4],t[5],t[6],t[7]),e.fill(),e.stroke()})},o=e.a;m(e=>a(e,o.hs[0]),31,31,t,l,i,o.ht,64,r),m(e=>{e.strokeStyle=w,e.fillStyle=x,E(e,5,5,20,20,o.hr)},31,31,t,l,i,o.s,40,r),m(e=>{e.fillStyle=w,e.fillRect(7,o.ey,4,o.eh),e.fillRect(11+o.eg,o.ey,4,o.eh),e.fillStyle=S,e.fillRect(8,o.ey+1,1,1),e.fillRect(11+o.eg+1,o.ey+1,1,1)},31,31,t,l,i,[255,255,255],255,r),m(e=>{e.fillStyle=S;var t=o.m[0]/3+o.m[2],l=19+o.m[1],i=o.m[0]/3*2+o.m[2],r=19+o.m[1],a=o.m[2]+o.m[0];e.beginPath(),e.moveTo(o.m[2],19),e.bezierCurveTo(t,l,i,r,a,19),e.stroke()},31,31,t,l,i,o.s,110,r),m(e=>a(e,o.hs[1]),31,31,t,l,i,o.ht,64,r)},E=(e,t,l,i,r,a)=>{e.beginPath(),e.moveTo(t+a,l),e.lineTo(t+i-a,l),e.quadraticCurveTo(t+i,l,t+i,l+a),e.lineTo(t+i,l+r-a),e.quadraticCurveTo(t+i,l+r,t+i-a,l+r),e.lineTo(t+a,l+r),e.quadraticCurveTo(t,l+r,t,l+r-a),e.lineTo(t,l+a),e.quadraticCurveTo(t,l,t+a,l),e.closePath(),e.fill(),e.stroke()},k=0,P=(new Date).getMinutes(),R=(new Date).getSeconds(),C=(e=10)=>{var t=(P+R)/100,l=a(100*(t-a(t)));return P=R,R=l,l%e},A=()=>[4,0].reduce((e,t)=>(e+=C(14)+1)<<t,0),M=()=>{var e;r=q(!0,3,((e=[])[0]=["Astro","Captain","Enchanter","Pirate","Priest","Sales Manager","g","h","i","j"][C()],e[1]=["Nigel","Fyodor","Jam","Jonas","Lucas","f","g","h","i","j"][C()],e[2]=["Keyboard","Planet","Soul","Video","e","f","g","h","i","j"][C()]+["jammer","crusher","juicer","b","e","f","g","h","i","j"][C()],e.join(" "))),I()},j=(e,t)=>{for(var l=[],i=[],r=0;r<e;r++)l.push(r);for(r=0;r<t;r++)i.push(l.splice(C(l.length),1)[0]);return i},q=(e,t,l)=>{var i={f:[],n:l,a:{s:[[197,140,133],[236,188,180],[80,51,53],[89,47,42]][C(4)].map(e=>e+1.5*(C()-4)),ht:[128*C(2),128*C(2),128*C(2)],hs:[[[],[]],[[[4,8,-6,34,20,34,8,1]],[[22,10,12,36,38,36,26,3],[26,3,-9,-6,-3,18,25,9]]],[[],[[22,6,6,-7,-7,17,21,8]]]][C(3)],hr:C(6)+3,ey:C(3)+12,eg:C(2)+2,eh:C(2)+2,m:[[10,2,8],[12,4,7]][C(2)]}};return e&&i.f.push({m:2,b:A(),i:0}),c(j(8,t),e=>i.f.push({m:1,b:A(),i:e+1})),i.f.filter(e=>0==e.b)==i.f.length?(console.error("All zeroes?!"),null):i},D=e=>{for(var t=0;e>0;)e&=e-1,t++;return t},L=(e,t)=>D(e)*t,z=(e,t)=>e.f.find(e=>e.i==t),B=(e,t)=>{(g=e.f.find(e=>e.i==t.i))?g.b+=t.b:e.f.push({m:1,b:t.b,i:t.i})},I=()=>{var t,l,o,n,f=(n={v:0},c((o=l=r,(t=i).f.map(e=>e.i).filter(e=>o.f.map(e=>e.i).includes(e))),e=>{var i=z(t,e),r=(z(l,e).b^i.b)&i.b,a=L(r,i.m);a>n.v&&(n.i=e,n.b=r,n.v=a)}),n.v>0?n:null);if(!f)return console.warn(`You have nothing of value to ${r.n}.`),void M();var h=((e,t,l)=>{var i=[];(i=e.f.map(l=>((e,t,l)=>{var i={i:l},r=z(e,l),a=z(t,l);return i.b=((a?a.b:0)^r.b)&r.b,i.v=L(i.b,r.m),i.e=r.m,i})(e,t,l.i)).filter(e=>e.b>0)).sort((e,t)=>e.v>t.v);var r=[],o=0;return c(i,e=>{if(e.v+o-l>0){var t=a((l-o)/e.e);if(!t)return;for(var i=j(8,8).map(e=>Math.pow(2,e));D(e.b)>t;){var n=i.pop();(e.b&n)==n&&(e.b-=n)}e.v=L(e.b,e.e)}r.push(e),o+=e.v}),r})(r,i,f.v);if(0==h.length)return console.warn(r.n+" has nothing of value to you."),void M();e={o:[f],p:h}},F=(e,t,l,i,r,a)=>l<e&&e<l+r&&i<t&&t<i+a;o.addEventListener("click",a=>{if(1==k&&l){console.debug("global_selected_chunk",l);var o=l.p;console.log("file",o);var n=l.g?e.o:e.p,f=n.find(e=>e.i==o.i);f||n.push(f={i:o.i,b:0}),(f.b&l.b)==l.b?f.b-=l.b:f.b+=l.b,h()}t&&("Accept"==t.t&&(t=>{c(e.o,e=>B(r,e)),c(e.p,e=>B(i,e)),e=null;var l=255==z(i,0).b,a=255==z(r,0).b;l&&a||l?console.warn("You won! :)"):a?console.warn(r.n+" won! :("):M(),h()})(),"Counter"==t.t&&(k=1,e={o:[],p:[]},h()))}),o.addEventListener("mousemove",e=>{e.preventDefault(),e.stopPropagation();var i,r=e.offsetX,a=e.offsetY;1==k&&(f.p.forEach(e=>{e.c.forEach(t=>{(t.h=F(r,a,t.x,t.y,e.cw,e.cw))&&(i=t)})}),f.o.forEach(e=>{e.c.forEach(t=>{(t.h=F(r,a,t.x,t.y,e.cw,e.cw))&&(i=t)})}),l=i||null,i=0),f.b.forEach(e=>{(e.s=F(r,a,e.x,e.y,e.w,e.h))&&(i=e)}),o.style.cursor=i?"pointer":"default",t=i||null}),window.addEventListener("resize",h,!0),window.addEventListener("orientationchange",h,!0),i=q(!0,3,"Bob"),M(),h(),requestAnimationFrame(b);</script></body></html>